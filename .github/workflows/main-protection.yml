name: Main Branch Protection

on:
  push:
    branches:
      - main
  pull_request:
    branches:
      - main

permissions:
  contents: read
  pull-requests: write
  issues: write

jobs:
  check-protection:
    runs-on: ubuntu-latest
    steps:
      - name: Check if push is via PR merge
        if: github.event_name == 'push'
        run: |
          echo "::notice::Direct push to main branch detected"
          echo "This workflow monitors main branch activity."
          echo "For this exam repository, all changes should come through Pull Requests."
          
      - name: PR Protection Check
        if: github.event_name == 'pull_request'
        run: |
          echo "âœ… Changes are being submitted via Pull Request - this is the correct workflow!"
          echo "PR #${{ github.event.pull_request.number }}: ${{ github.event.pull_request.title }}"
          echo "Author: ${{ github.event.pull_request.user.login }}"
